/*! projectile 2015-02-19 */
function initializeProjectile(a){"use strict";var b=a.clientX,c=a.clientY,d=Math.floor(11*Math.random()),e=Math.floor(361*Math.random());projectile={position:{x:b,y:c},velocity:{x:Math.cos(e*(Math.PI/180))*d,y:-Math.sin(e*(Math.PI/180))*d},radius:15,mass:.7,restitution:-.6},console.log("projectile initial position: "+projectile.position.x+" (x), "+projectile.position.y+" (y)"),console.log("initial angle (counter clockwise): "+e+"ยบ, and initial velocity: "+d),console.log("projectile initial velocity: "+projectile.velocity.x+" (v_x), "+projectile.velocity.y+" (v_y)")}function drawBall(){"use strict";ctx.clearRect(0,0,width,height),ctx.save(),ctx.beginPath(),ctx.arc(projectile.position.x,projectile.position.y,projectile.radius,0,2*Math.PI,!1),ctx.lineWidth=1,ctx.fillStyle="grey",ctx.fill(),ctx.closePath(),ctx.restore()}function calculateDragForce(a){"use strict";var b=.47,c=1.22,d=Math.PI*projectile.radius*projectile.radius/1e4,e=-.5*b*d*c*a*a*a/Math.abs(a);return isNaN(e)?0:e}function initializeCanvas(){"use strict";canvas=document.getElementById("projectile"),ctx=canvas.getContext("2d")}function startProjectile(a){"use strict";initializeProjectile(a),initializeCanvas(),loopTimer=window.requestInterval(loop,frameDelay)}function drawProjectile(a){"use strict";nrClicks+=1,nrClicks>1&&hitGround===!1?alert("please wait for the projectile to stop."):hitGround===!0?(hitGround=!1,window.clearRequestInterval(loopTimer),startProjectile(a)):startProjectile(a)}var width=800,height=600,canvas,ctx,frameRate=.025,frameDelay=1e3*frameRate,loopTimer,nrClicks=0,projectile,hitGround=!1,loop=function(){"use strict";if(!hitGround){var a=calculateDragForce(projectile.velocity.x)/projectile.mass;projectile.velocity.x+=a*frameRate,projectile.velocity.y+=9.81*frameRate,Math.abs(projectile.velocity.x)<=1.1&&projectile.position.y===canvas.height-projectile.radius&&Math.abs(projectile.velocity.y)<=.5&&(console.log("houston, we hit the ground to a full stop!"),projectile.velocity.x=0,projectile.velocity.y=0,hitGround=!0),projectile.position.x+=projectile.velocity.x*frameRate*100,projectile.position.y+=projectile.velocity.y*frameRate*100,projectile.position.y>height-projectile.radius&&(projectile.velocity.y*=projectile.restitution,projectile.position.y=height-projectile.radius),projectile.position.x>width-projectile.radius&&(projectile.velocity.x*=projectile.restitution,projectile.position.x=width-projectile.radius),projectile.position.x<projectile.radius&&(projectile.velocity.x*=projectile.restitution,projectile.position.x=projectile.radius),drawBall()}};window.requestAnimFrame=function(){"use strict";return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),window.requestInterval=function(a,b){"use strict";function c(){var f=(new Date).getTime(),g=f-d;g>=b&&(a.call(),d=(new Date).getTime()),e.value=window.requestAnimFrame(c)}if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setInterval(a,b);var d=(new Date).getTime(),e=Object.create(null);return e.value=window.requestAnimFrame(c),e},window.clearRequestInterval=function(a){"use strict";window.cancelAnimationFrame?window.cancelAnimationFrame(a.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(a.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(a.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(a.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(a.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(a.value):clearInterval(a)};